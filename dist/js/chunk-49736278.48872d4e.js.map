{"version":3,"sources":["webpack:///./src/assets/images/bg.png","webpack:///./src/views/studentPC/startClass.vue?8e00","webpack:///./src/views/studentPC/startClass.vue","webpack:///./src/views/studentPC/startClass.vue?64a5","webpack:///./src/views/studentPC/startClass.vue?f160","webpack:///./src/assets/images/Logo.png","webpack:///./src/views/studentPC/startClass.vue?87b2"],"names":["module","exports","__webpack_require__","p","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","cp","attrs","span","name","roomId","class","wbColor","useWB","multiplePusher","useScreen","isStudentPushed","useLocalStreamListOnlyStudent","length","directives","rawName","value","expression","ref","autoplay","muted","domProps","staticStyle","position","left","top","width","color","font-size","_e","_l","student","key","stream_id","refInFor","extra_info","video","audio","wbBColor","text-align","lg","effect","content","placement","openPush","closePush","type","on","click","togglePushStudent","openAudio","audioOpen","closeAudio","$event","toggleAudio","stOpenVideo","stPushVideoOpen","stCloseVideo","toggleStVideo","stOpenAudio","stPushAudioOpen","stCloseAudio","toggleStAudio","userList","chatBody","addWB","chat","index","me","id_name","idName","teacher","hostIdName","substr","msg_content","placeholder","nativeOn","keyup","indexOf","_k","keyCode","sendMsg","model","callback","$$v","inputMsg","disabled","liveStatus","allBan","staticRenderFns","startClassvue_type_script_lang_ts_Index","_super","Index","_this","apply","arguments","ruleForm","password","logo","bg","userId","appId","webrtcService","closeText","smallCloseText","isLastOne","videoOpen","useLocalStreamList","studentPushStreamId","Date","getTime","tslib_es6","prototype","watchBoolean","val","watchAllBanBoolean","$notify","title","message","Object","defineProperty","filter","s","startsWith","mounted","$route","params","query","startLive","play","stopPlay","onRecvEndJoinLiveCommand","onStreamExtraInfoUpdated","beforeDestroy","Number","login","then","list","logOut","forEach","stream","setStartStatus","err","console","error","$message","multipleVideo","JSON","parse","push","pull","$refs","pushVideo","replay","pushVideo2","setTimeout","$nextTick","withWB","withScreen","store","commit","mutations","cameraStatus","studentBan","targetVideo","room","joinWB","pushDIV","WBJson","anchor_id_name","some","streamInfo","find","preview","pushtStudentVideo","stopPreview","stopPublish","keep","k","findIndex","splice","log","isAllBan","sendRoomMsg","setChatInfo","nick_name","role","msg_id","msg_category","msg_type","send_time","document","querySelector","scrollTop","offsetTop","leaveRoom","stopWB","$router","fullPath","replace","requestId","from_userid","from_username","roomid","toggleVideo","updateStreamExtraInfo","stringify","streamList","map","extra_info_1","lib","vue_property_decorator","startClassvue_type_script_lang_ts_","studentPC_startClassvue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_startClass_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_startClass_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-49736278.48872d4e.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/bg.64708479.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"TClass\"},[_c('el-container',[_c('el-header',[_c('div',{staticClass:\"headerTitle\"},[_vm._v(_vm._s(_vm.cp))])]),_c('el-main',[_c('el-row',{staticClass:\"main\"},[_c('el-col',{attrs:{\"span\":19}},[_c('el-row',{staticClass:\"classInfo\"},[_c('el-col',{staticClass:\"left\",attrs:{\"span\":19}},[_c('span',[_vm._v(_vm._s(_vm.name))]),_c('span',{staticClass:\"roomId\"},[_vm._v(\"ID:\"+_vm._s(_vm.roomId))])])],1),_c('div',{staticClass:\"localVideo\",class:{\n                            wbColor: _vm.useWB,\n                            multiplePusher:\n                                _vm.useWB | _vm.useScreen | _vm.isStudentPushed | (_vm.useLocalStreamListOnlyStudent.length > 0),\n                        }},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n                                _vm.useWB | _vm.useScreen | _vm.isStudentPushed | (_vm.useLocalStreamListOnlyStudent.length > 0)\n                            ),expression:\"\\n                                useWB | useScreen | isStudentPushed | (useLocalStreamListOnlyStudent.length > 0)\\n                            \"}],staticClass:\"localvideoSmall\"},[_c('div',[_c('video',{ref:\"pushVideo2\",attrs:{\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"muted\":true}}),_c('span',[_vm._v(\"老师\")]),(_vm.smallCloseText)?_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"0%\",\"top\":\"40%\",\"width\":\"100%\",\"color\":\"white\",\"font-size\":\"10px\"}},[_vm._v(\"\\n                                    等待老师连接....\\n                                \")]):_vm._e()]),(_vm.isStudentPushed)?_c('div',[_c('video',{ref:\"pushtStudentVideo\",attrs:{\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"muted\":true}}),_c('span',[_vm._v(\"我\")])]):_vm._e(),_vm._l((_vm.useLocalStreamListOnlyStudent),function(student){return _c('div',{key:student.stream_id},[_c('video',{ref:student.stream_id,refInFor:true,attrs:{\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"muted\":true}}),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(student.extra_info && !student.extra_info.video),expression:\"student.extra_info && !student.extra_info.video\"}],class:[!student.extra_info.audio ? 'noAudioVideo' : 'onlyAudio']}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n                                        student.extra_info && student.extra_info.video && !student.extra_info.audio\n                                    ),expression:\"\\n                                        student.extra_info && student.extra_info.video && !student.extra_info.audio\\n                                    \"}]},[_vm._v(\"麦克风未打开\")])])})],2),_c('video',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.useWB | _vm.useScreen),expression:\"!useWB | useScreen\"}],ref:\"pushVideo\",attrs:{\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"muted\":true}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.useWB),expression:\"useWB\"}],ref:\"pushDIV\",class:{ wbBColor: _vm.useWB }}),(_vm.closeText)?_c('span',{staticStyle:{\"position\":\"absolute\",\"left\":\"0%\",\"top\":\"50%\",\"width\":\"100%\",\"text-align\":\"center\",\"color\":\"white\"}},[_vm._v(\"等待老师连接....\")]):_vm._e(),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n                                !_vm.useWB &&\n                                    !_vm.useScreen &&\n                                    (_vm.useLocalStreamListOnlyStudent.length > 0 || _vm.isStudentPushed)\n                            ),expression:\"\\n                                !useWB &&\\n                                    !useScreen &&\\n                                    (useLocalStreamListOnlyStudent.length > 0 || isStudentPushed)\\n                            \"}],staticClass:\"cameraContain\"},[_c('span',{staticClass:\"noShare\"}),_c('span',{staticClass:\"noShareText\"},[_vm._v(\"暂无分享内容\")])])]),_c('el-row',{staticClass:\"handlerSection\"},[_c('el-col',{staticClass:\"mediaSwitch\",attrs:{\"span\":18,\"lg\":16}},[_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":_vm.isStudentPushed ? '下讲台' : '上讲台',\"placement\":\"top-start\"}},[_c('el-button',{class:{ openPush: !_vm.isStudentPushed, closePush: _vm.isStudentPushed },attrs:{\"type\":\"text\"},on:{\"click\":_vm.togglePushStudent}})],1),_c('el-button',{class:{ openAudio: _vm.audioOpen, closeAudio: !_vm.audioOpen },attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.toggleAudio(false)}}}),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isStudentPushed),expression:\"isStudentPushed\"}],class:{ stOpenVideo: _vm.stPushVideoOpen, stCloseVideo: !_vm.stPushVideoOpen },attrs:{\"type\":\"text\"},on:{\"click\":_vm.toggleStVideo}}),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isStudentPushed),expression:\"isStudentPushed\"}],class:{ stOpenAudio: _vm.stPushAudioOpen, stCloseAudio: !_vm.stPushAudioOpen },attrs:{\"type\":\"text\"},on:{\"click\":_vm.toggleStAudio}})],1)],1)],1),_c('el-col',{attrs:{\"span\":5}},[_c('div',{staticClass:\"chatHeader\"},[_c('span',[_vm._v(\"讨论区 （人数: \"+_vm._s(_vm.userList.length)+\" 人）\")])]),_c('div',{class:{ chatBody: true, addWB: false }},[_c('ul',_vm._l((_vm.chatList),function(chat,index){return _c('li',{key:index,class:{ me: chat.id_name === _vm.idName, teacher: _vm.hostIdName === chat.id_name }},[(chat.id_name !== _vm.idName)?_c('div',{staticClass:\"userName\"},[_c('span',[_vm._v(_vm._s(_vm.hostIdName !== chat.id_name ? '学生' : '老师'))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hostIdName !== chat.id_name),expression:\"hostIdName !== chat.id_name\"}]},[_vm._v(\"\\n                                        \"+_vm._s(chat.id_name.substr(chat.id_name.length - 6))+\"\\n                                    \")])]):_vm._e(),_c('div',{staticClass:\"userContent\"},[_vm._v(_vm._s(chat.msg_content))])])}),0)]),_c('div',{staticClass:\"chatFooter\"},[_c('el-input',{attrs:{\"placeholder\":\"输入消息参与互动\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMsg($event)}},model:{value:(_vm.inputMsg),callback:function ($$v) {_vm.inputMsg=$$v},expression:\"inputMsg\"}}),_c('el-button',{attrs:{\"disabled\":_vm.liveStatus !== 2 || !_vm.inputMsg || _vm.allBan},on:{\"click\":_vm.sendMsg}},[_vm._v(\"发送\\n                        \")])],1)])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from 'vue-property-decorator';\nimport webrtcService from '@/service/webrtcService';\nimport { ChatInfo, StreamInfo } from 'webrtc-zego/sdk/common/zego.entity';\nimport { State, Mutation } from 'vuex-class';\nimport { setChatInfo, setStartStatus, setCameraStatus, setAllStudentStatus } from '@/store/mutations';\nimport store from '@/store';\n\n@Component({})\nexport default class Index extends Vue {\n    ruleForm = {\n        password: '',\n    };\n    logo = require('../../assets/images/Logo.png');\n    bg = require('../../assets/images/bg.png');\n\n    roomId: string = '';\n    cp = '即构课堂';\n    name = '即构大班直播课堂';\n    userId = '';\n    appId = '';\n    @State('userList')\n    userList!: any[];\n    @State('cameraStatus')\n    cameraStatus!: boolean;\n    @State('isAllBan')\n    isAllBan!: boolean;\n    // 1 未开始 2直播中 3 已结束\n    liveStatus: 1 | 2 | 3 | 4 = 1;\n    inputMsg = '';\n    idName = webrtcService.idName;\n\n    useWB = false;\n    useScreen = false;\n    closeText = false;\n    smallCloseText = false;\n    allBan = false;\n    audioOpen = false;\n    targetVideo!: HTMLVideoElement;\n    isLastOne = false;\n    hostIdName!: string;\n    videoOpen = false;\n\n    stPushVideoOpen = true;\n    stPushAudioOpen = true;\n    @State('chatList')\n    chatList!: ChatInfo[];\n    @Mutation(setChatInfo)\n    setChatInfo!: (p: ChatInfo[]) => void;\n    @Mutation(setStartStatus)\n    setStartStatus!: (p: 0 | 1 | 2) => void;\n\n    @Watch('cameraStatus')\n    watchBoolean(val: boolean) {\n        this.videoOpen = val;\n        if (val == true) {\n            if (\n                !this.useWB &&\n                !this.useScreen &&\n                this.useLocalStreamListOnlyStudent.length < 1 &&\n                !this.isStudentPushed\n            ) {\n                this.closeText = val;\n            } else {\n                this.smallCloseText = val;\n            }\n        } else {\n            this.closeText = val;\n            this.smallCloseText = val;\n        }\n    }\n\n    @Watch('isAllBan')\n    watchAllBanBoolean(val: boolean) {\n        if (val == true) {\n            this.allBan = true;\n            this.$notify({\n                title: '警告',\n                message: '老师已全员禁言',\n                type: 'warning',\n            });\n        } else {\n            this.allBan = false;\n        }\n    }\n\n    useLocalStreamList: StreamInfo[] = [];\n\n    get useLocalStreamListOnlyStudent() {\n        return this.useLocalStreamList.filter(s => s.stream_id.startsWith('student'));\n    }\n\n    mounted() {\n        this.roomId = this.$route.params.roomId;\n        this.cp = this.$route.query.cp as string;\n        this.name = this.$route.query.name as string;\n        this.appId = this.$route.query.appId as string;\n        this.userId = this.$route.query.userId as string;\n        this.startLive();\n        webrtcService.play = this.play;\n        webrtcService.stopPlay = this.stopPlay;\n        webrtcService.onRecvEndJoinLiveCommand = this.onRecvEndJoinLiveCommand;\n        webrtcService.onStreamExtraInfoUpdated = this.onStreamExtraInfoUpdated;\n    }\n    beforeDestroy() {\n        webrtcService.play = () => {};\n        webrtcService.stopPlay = () => {};\n        webrtcService.onRecvEndJoinLiveCommand = () => {};\n        webrtcService.onStreamExtraInfoUpdated = () => {};\n    }\n    startLive() {\n        let appId = Number(this.appId);\n        webrtcService.login(this.roomId, 2, appId, this.userId).then(\n            (list: StreamInfo[]) => {\n                this.liveStatus = 2;\n                // 主播未开始\n                // console.log(\"TCL: Index -> startLive -> list\", list.length)\n                if (list.length === 0) {\n                    this.logOut();\n                } else {\n                    list.forEach(stream => {\n                        // 开始拉流\n                        this.play(stream);\n                    });\n\n                    this.setStartStatus(1);\n                }\n            },\n            err => {\n                console.error(err);\n                this.$message({\n                    message: '开启直播服务失败了！！网络正常连接下，再刷新页面重试一下吧',\n                    type: 'warning',\n                });\n            },\n        );\n    }\n\n    play(stream: StreamInfo) {\n        let multipleVideo = false;\n        if (this.useLocalStreamList.length === 1 && this.useLocalStreamList[0].stream_id.startsWith('stream')) {\n            multipleVideo = true;\n        }\n        stream.extra_info &&\n            typeof stream.extra_info === 'string' &&\n            (stream.extra_info = JSON.parse(stream.extra_info));\n        if (this.useLocalStreamList.filter(s => s.stream_id.startsWith('student')).length < 3) {\n            this.useLocalStreamList.push(stream);\n        }\n        // 开始拉流\n        const extra_info: any = stream.extra_info;\n\n        // 拉屏幕共享\n        if (stream.stream_id.startsWith('screen')) {\n            this.useWB = false;\n            this.useScreen = true;\n            webrtcService.pull(this.$refs.pushVideo as HTMLVideoElement, stream.stream_id);\n            if (multipleVideo) {\n                webrtcService.replay(this.$refs.pushVideo2 as HTMLVideoElement, this.useLocalStreamList[0].stream_id);\n                setTimeout(() => {\n                    (this.$refs.pushVideo2 as HTMLVideoElement).play();\n                    (this.$refs.pushVideo as HTMLVideoElement).play();\n                }, 500);\n            }\n            return;\n        } else if (stream.stream_id.startsWith('student')) {\n            this.$nextTick(() => {\n                if (this.$refs[stream.stream_id] && !!(this.$refs[stream.stream_id] as HTMLVideoElement[])[0]) {\n                    // 拉学生流\n                    webrtcService.pull((this.$refs[stream.stream_id] as HTMLVideoElement[])[0], stream.stream_id);\n                } else {\n                    setTimeout(() => {\n                        // 拉学生流\n                        webrtcService.pull((this.$refs[stream.stream_id] as HTMLVideoElement[])[0], stream.stream_id);\n                    }, 1000);\n                }\n                this.toggleAudio(true);\n            });\n\n            if (multipleVideo) {\n                webrtcService.replay(this.$refs.pushVideo2 as HTMLVideoElement, this.useLocalStreamList[0].stream_id);\n                setTimeout(() => {\n                    (this.$refs.pushVideo2 as HTMLVideoElement).play();\n                }, 500);\n            }\n\n            return;\n        }\n\n        this.useWB = extra_info.withWB === 1;\n        this.useScreen = extra_info.withScreen === 1;\n        store.commit(setCameraStatus, extra_info.cameraStatus);\n        store.commit(setAllStudentStatus, extra_info.studentBan);\n        //首次进入同时有白板和屏幕共享时bug\n        this.useScreen && (this.useWB = false);\n        if (this.useWB) {\n            this.targetVideo = this.$refs.pushVideo2 as HTMLVideoElement;\n            !webrtcService.room &&\n                this.$nextTick(() => {\n                    webrtcService.joinWB(this.$refs.pushDIV as HTMLDivElement, extra_info.WBJson, false, true);\n                    // this.closeText = false;\n                    if (this.videoOpen) {\n                        this.smallCloseText = true;\n                        this.closeText = false;\n                    }\n                });\n        } else if (\n            extra_info.withScreen === 1 ||\n            this.useLocalStreamListOnlyStudent.length > 0 ||\n            this.isStudentPushed\n        ) {\n            this.targetVideo = this.$refs.pushVideo2 as HTMLVideoElement;\n            if (this.videoOpen) {\n                this.smallCloseText = true;\n                this.closeText = false;\n            }\n        } else {\n            this.targetVideo = this.$refs.pushVideo as HTMLVideoElement;\n            if (this.videoOpen) {\n                this.smallCloseText = false;\n                this.closeText = true;\n            }\n        }\n\n        webrtcService.pull(this.targetVideo, stream.stream_id);\n        // alert(webrtcService.pull(this.targetVideo, stream.stream_id))\n        this.isLastOne = false;\n        this.hostIdName = stream.anchor_id_name;\n    }\n\n    isStudentPushed: boolean = false;\n    studentPushStreamId = 'student' + new Date().getTime();\n\n    togglePushStudent() {\n        if (this.useLocalStreamListOnlyStudent.length >= 3) {\n            this.$notify({\n                title: '警告',\n                message: '讲台人数已经超过3人，不能再上讲台',\n                type: 'warning',\n            });\n            return;\n        }\n        if (!this.useLocalStreamList.some(stream => stream.stream_id.startsWith('stream'))) {\n            this.$notify({\n                title: '警告',\n                message: '老师暂时离开，此时不能上讲台',\n                type: 'warning',\n            });\n            return;\n        }\n\n        this.isStudentPushed = !this.isStudentPushed;\n\n        if (this.isStudentPushed) {\n            this.$nextTick(() => {\n                if (this.useLocalStreamList.length === 1) {\n                    const streamInfo = this.useLocalStreamList.find(s => s.stream_id.startsWith('stream'));\n                    streamInfo && webrtcService.replay(this.$refs.pushVideo2 as HTMLVideoElement, streamInfo.stream_id);\n                    (this.$refs.pushVideo2 as HTMLVideoElement).muted = !this.audioOpen;\n                }\n                webrtcService.preview(this.$refs.pushtStudentVideo as HTMLVideoElement, this.studentPushStreamId, {\n                    withWB: 0,\n                    withScreen: 0,\n                    WBJson: '',\n                    audio: true,\n                    video: true,\n                });\n            });\n        } else {\n            webrtcService.stopPreview(this.$refs.pushtStudentVideo as HTMLVideoElement);\n            webrtcService.stopPublish(this.studentPushStreamId);\n            if (this.useLocalStreamList.length === 1 && !this.useScreen && !this.useWB) {\n                const streamInfo = this.useLocalStreamList.find(s => s.stream_id.startsWith('stream'));\n                streamInfo && webrtcService.replay(this.$refs.pushVideo as HTMLVideoElement, streamInfo.stream_id);\n                (this.$refs.pushVideo as HTMLVideoElement).muted = !this.audioOpen;\n                setTimeout(() => {\n                    (this.$refs.pushVideo as HTMLVideoElement).play();\n                }, 500);\n            }\n        }\n    }\n\n    toggleAudio(keep = false) {\n        // console.log(this.audioOpen)\n        if (!keep) {\n            this.audioOpen = !this.audioOpen;\n        }\n        this.useLocalStreamListOnlyStudent.forEach(stream => {\n            if (this.$refs[stream.stream_id] && !!((this.$refs[stream.stream_id] as any)[0] as HTMLVideoElement)) {\n                ((this.$refs[stream.stream_id] as any)[0] as HTMLVideoElement).muted = !this.audioOpen;\n            }\n        });\n        (this.$refs.pushVideo2 as HTMLVideoElement).muted = !this.audioOpen;\n        (this.$refs.pushVideo as HTMLVideoElement).muted = !this.audioOpen;\n        //this.targetVideo.muted = !this.audioOpen;\n    }\n\n    stopPlay(stream: StreamInfo, isLastOne: boolean) {\n        const k = this.useLocalStreamList.findIndex(s => s.stream_id === stream.stream_id);\n        this.useLocalStreamList.splice(k, 1);\n\n        if (\n            this.useLocalStreamList.length === 1 &&\n            this.useLocalStreamList[0].stream_id.startsWith('stream') &&\n            !this.isStudentPushed &&\n            !this.useWB &&\n            !this.useScreen\n        ) {\n            this.$nextTick(() => {\n                webrtcService.replay(this.$refs.pushVideo as HTMLVideoElement, this.useLocalStreamList[0].stream_id);\n            });\n\n            // setTimeout(() => {\n            //     (this.$refs.pushVideo as HTMLVideoElement).play();\n            // }, 1500);\n        }\n\n        if (stream.stream_id.startsWith('screen')) {\n            this.useScreen = false;\n        }\n\n        // this.useWB = false;\n        this.isLastOne = isLastOne;\n        console.log('stopPlay', stream);\n        // 最后一条流，退出10秒内没有新流进来，视为课程结束\n        if (this.isLastOne) {\n            setTimeout(() => {\n                if (this.isLastOne) this.logOut();\n            }, 10000);\n        }\n    }\n\n    sendMsg() {\n        if (!this.isAllBan && this.inputMsg) {\n            webrtcService.sendRoomMsg(this.inputMsg, this.idName);\n\n            this.setChatInfo([\n                {\n                    id_name: this.idName,\n                    nick_name: this.idName,\n                    role: 1,\n                    msg_id: '0',\n                    msg_category: 1,\n                    msg_type: 1,\n                    msg_content: this.inputMsg,\n                    send_time: new Date().getTime(),\n                },\n            ]);\n\n            this.inputMsg = '';\n            this.$nextTick(() => {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                document!.querySelector('.chatBody')!.scrollTop = (document!.querySelector(\n                    '.chatBody ul li:last-child',\n                )! as any).offsetTop!;\n            });\n        }\n    }\n\n    logOut() {\n        this.setStartStatus(2);\n        webrtcService.leaveRoom();\n        webrtcService.stopWB();\n        this.$router.push(this.$route.fullPath.replace('pull', 'student'));\n    }\n\n    // 接收老师断开连麦，学生再断开\n    onRecvEndJoinLiveCommand(requestId: string, from_userid: string, from_username: string, roomid: string) {\n        this.isStudentPushed && this.togglePushStudent();\n    }\n\n    // 学生端推流视频开关\n    toggleStVideo() {\n        this.stPushVideoOpen = !this.stPushVideoOpen;\n        webrtcService.toggleVideo(this.stPushVideoOpen);\n        webrtcService.updateStreamExtraInfo(\n            this.studentPushStreamId,\n            JSON.stringify({\n                audio: this.stPushAudioOpen,\n                video: this.stPushVideoOpen,\n            }),\n        );\n    }\n\n    // 学生端推流麦克风开关\n    toggleStAudio() {\n        this.stPushAudioOpen = !this.stPushAudioOpen;\n        webrtcService.toggleAudio(this.stPushAudioOpen);\n        webrtcService.updateStreamExtraInfo(\n            this.studentPushStreamId,\n            JSON.stringify({\n                audio: this.stPushAudioOpen,\n                video: this.stPushVideoOpen,\n            }),\n        );\n    }\n\n    // 监听到对应学生推流画面，声音开关\n    onStreamExtraInfoUpdated(streamList: StreamInfo[]) {\n        this.useLocalStreamList = this.useLocalStreamList.map(stream => {\n            streamList.forEach(s => {\n                if (stream.stream_id === s.stream_id) {\n                    stream.extra_info = JSON.parse(s.extra_info);\n                }\n            });\n\n            return stream;\n        });\n\n        // 单关闭白板\n        streamList.forEach(stream => {\n            if (stream.stream_id.startsWith('stream')) {\n                let extra_info = JSON.parse(stream.extra_info);\n                // 白板开关逻辑\n                if (typeof extra_info.withWB === 'number') {\n                    if (extra_info.withWB === 0) {\n                        this.useWB = false;\n                    } else if (extra_info.withWB === 1) {\n                        this.useWB = true;\n                        !webrtcService.room &&\n                            this.$nextTick(() => {\n                                webrtcService.joinWB(\n                                    this.$refs.pushDIV as HTMLDivElement,\n                                    extra_info.WBJson,\n                                    false,\n                                    true,\n                                );\n                                // this.closeText = false;\n                                if (this.videoOpen) {\n                                    this.smallCloseText = true;\n                                    this.closeText = false;\n                                }\n                            });\n                    }\n                    if (\n                        this.useLocalStreamList.length === 1 &&\n                        this.useLocalStreamList[0].stream_id.startsWith('stream') &&\n                        !this.isStudentPushed\n                    ) {\n                        webrtcService.replay(\n                            this.useWB\n                                ? (this.$refs.pushVideo2 as HTMLVideoElement)\n                                : (this.$refs.pushVideo as HTMLVideoElement),\n                            this.useLocalStreamList[0].stream_id,\n                        );\n                    }\n                }\n\n                if (extra_info.withScreen === 0) {\n                    this.useScreen = false;\n                }\n            }\n        });\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./startClass.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./startClass.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./startClass.vue?vue&type=template&id=6f490054&\"\nimport script from \"./startClass.vue?vue&type=script&lang=ts&\"\nexport * from \"./startClass.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./startClass.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/png;base64,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\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./startClass.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./startClass.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}