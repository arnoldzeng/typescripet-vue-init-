(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dc0ed74"],{"3f6e":function(e,t,s){e.exports=s.p+"img/bg.64708479.png"},"447a":function(e,t,s){"use strict";var n=s("6b93"),i=s.n(n);i.a},5684:function(e,t){e.exports="data:image/png;base64,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"},"6b93":function(e,t,s){},b311:function(e,t,s){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
(function(t,s){e.exports=s()})(0,function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),r=s(1),o=h(r),a=s(3),u=h(a),c=s(4),l=h(c);function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(e,s){d(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.resolveOptions(s),n.listenClick(e),n}return f(t,e),i(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof e.action?e.action:this.defaultAction,this.target="function"===typeof e.target?e.target:this.defaultTarget,this.text="function"===typeof e.text?e.text:this.defaultText,this.container="object"===n(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,l.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return v("action",e)}},{key:"defaultTarget",value:function(e){var t=v("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return v("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"===typeof e?[e]:e,s=!!document.queryCommandSupported;return t.forEach(function(e){s=s&&!!document.queryCommandSupported(e)}),s}}]),t}(u.default);function v(e,t){var s="data-clipboard-"+e;if(t.hasAttribute(s))return t.getAttribute(s)}e.exports=m},function(e,t,s){"use strict";var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),r=s(2),o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t){u(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var s=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=s+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"===typeof e?"undefined":n(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=c},function(e,t){function s(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var s=e.hasAttribute("readonly");s||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),s||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}e.exports=s},function(e,t){function s(){}s.prototype={on:function(e,t,s){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:s}),this},once:function(e,t,s){var n=this;function i(){n.off(e,i),t.apply(s,arguments)}return i._=t,this.on(e,i,s)},emit:function(e){var t=[].slice.call(arguments,1),s=((this.e||(this.e={}))[e]||[]).slice(),n=0,i=s.length;for(n;n<i;n++)s[n].fn.apply(s[n].ctx,t);return this},off:function(e,t){var s=this.e||(this.e={}),n=s[e],i=[];if(n&&t)for(var r=0,o=n.length;r<o;r++)n[r].fn!==t&&n[r].fn._!==t&&i.push(n[r]);return i.length?s[e]=i:delete s[e],this}},e.exports=s},function(e,t,s){var n=s(5),i=s(6);function r(e,t,s){if(!e&&!t&&!s)throw new Error("Missing required arguments");if(!n.string(t))throw new TypeError("Second argument must be a String");if(!n.fn(s))throw new TypeError("Third argument must be a Function");if(n.node(e))return o(e,t,s);if(n.nodeList(e))return a(e,t,s);if(n.string(e))return u(e,t,s);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,s){return e.addEventListener(t,s),{destroy:function(){e.removeEventListener(t,s)}}}function a(e,t,s){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,s)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,s)})}}}function u(e,t,s){return i(document.body,e,t,s)}e.exports=r},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var s=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===s||"[object HTMLCollection]"===s)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"===typeof e||e instanceof String},t.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},function(e,t,s){var n=s(7);function i(e,t,s,n,i){var r=o.apply(this,arguments);return e.addEventListener(s,r,i),{destroy:function(){e.removeEventListener(s,r,i)}}}function r(e,t,s,n,r){return"function"===typeof e.addEventListener?i.apply(null,arguments):"function"===typeof s?i.bind(null,document).apply(null,arguments):("string"===typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return i(e,t,s,n,r)}))}function o(e,t,s,i){return function(s){s.delegateTarget=n(s.target,t),s.delegateTarget&&i.call(e,s)}}e.exports=r},function(e,t){var s=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}function i(e,t){while(e&&e.nodeType!==s){if("function"===typeof e.matches&&e.matches(t))return e;e=e.parentNode}}e.exports=i}])})},d88d:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"TClass"},[s("el-container",[s("el-header",[s("div",{staticClass:"headerTitle"},[e._v(e._s(e.cp))])]),s("el-main",[s("el-row",{staticClass:"main"},[s("el-col",{attrs:{span:19}},[s("el-row",{staticClass:"classInfo"},[s("el-col",{staticClass:"left",attrs:{span:19,md:15,sm:13,xs:9}},[s("span",[e._v(e._s(e.name))]),s("span",{staticClass:"roomId"},[e._v("ID:"+e._s(e.roomId))])]),s("el-col",{staticClass:"right",attrs:{span:5,md:9,sm:11,xs:15}},[s("el-button",{ref:"share",staticClass:"share",attrs:{type:"text"}},[s("span",[e._v("链接分享")])]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:2!==e.liveStatus,expression:"liveStatus !== 2"}],staticClass:"startLive",on:{click:e.startLive}},[e._v("开始直播")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:2===e.liveStatus,expression:"liveStatus === 2"}],staticClass:"startLive",on:{click:e.stopLive}},[e._v("关闭直播")])],1)],1),s("div",{staticClass:"localVideo",class:{wbColor:e.useWB,multiplePusher:2===e.liveStatus&&e.useWB|e.useScreen|e.useLocalStreamListOnlyStudent.length>0}},[s("div",{directives:[{name:"show",rawName:"v-show",value:2===e.liveStatus&&e.useWB|e.useScreen|e.useLocalStreamListOnlyStudent.length>0,expression:"\n                                liveStatus === 2 && useWB | useScreen | (useLocalStreamListOnlyStudent.length > 0)\n                            "}],staticClass:"localvideoSmall"},[s("div",[s("video",{ref:"pushVideo2",attrs:{autoplay:"",muted:""},domProps:{muted:!0}})]),e._l(e.useLocalStreamListOnlyStudent,function(t){return s("div",{key:t.stream_id,on:{mouseover:function(s){return e.startHover(t.stream_id)},mouseleave:function(s){return e.endHover(t.stream_id)}}},[s("video",{ref:t.stream_id,refInFor:!0,attrs:{autoplay:""},on:{mouseover:function(s){return e.startHover(t.stream_id)}}}),s("p",{directives:[{name:"show",rawName:"v-show",value:!t.showClose&&t.extra_info&&!t.extra_info.video,expression:"!student.showClose && student.extra_info && !student.extra_info.video"}],class:[t.extra_info.audio?"onlyAudio":"noAudioVideo"],on:{mouseover:function(s){return e.startHover(t.stream_id)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.showClose&&t.extra_info&&t.extra_info.video&&!t.extra_info.audio,expression:"\n                                        !student.showClose &&\n                                            student.extra_info &&\n                                            student.extra_info.video &&\n                                            !student.extra_info.audio\n                                    "}],on:{mouseover:function(s){return e.startHover(t.stream_id)}}},[e._v("麦克风未打开")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.showClose,expression:"student.showClose"}],on:{mouseleave:function(s){return e.endHover(t.stream_id)},click:function(s){return e.closeStudentPush(t.anchor_id_name)}}},[e._v("X 下讲台")])])})],2),s("video",{directives:[{name:"show",rawName:"v-show",value:!e.useWB&&!e.useScreen&&0===e.useLocalStreamListOnlyStudent.length&&3!==e.liveStatus,expression:"\n                                !useWB &&\n                                    !useScreen &&\n                                    useLocalStreamListOnlyStudent.length === 0 &&\n                                    liveStatus !== 3\n                            "}],ref:"pushVideo",attrs:{autoplay:"",muted:""},domProps:{muted:!0}}),s("video",{directives:[{name:"show",rawName:"v-show",value:!e.useWB&&e.useScreen,expression:"!useWB && useScreen"}],ref:"pushVideoScreen",attrs:{autoplay:"",muted:""},domProps:{muted:!0}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.useWB&&!e.useScreen,expression:"useWB && !useScreen"}],class:{wbBColor:e.useWB},staticStyle:{position:"relative"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.useWB&&!e.useScreen,expression:"useWB && !useScreen"}],staticClass:"controller"},[s("span",{staticClass:"controllerBox"},[s("span",{staticClass:"red",class:{selected:e.redSelect},on:{click:function(t){return e.pencli("red")}}}),s("span",{staticClass:"blue",class:{selected:e.blueSelect},on:{click:function(t){return e.pencli("blue")}}}),s("span",{staticClass:"eraser",class:{selected:e.earSelect},on:{click:function(t){return e.eraser()}}})])]),s("div",{ref:"pushDIV",staticStyle:{height:"100%",width:"100%"}})]),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.previewStatus&&2!==e.liveStatus&&!e.useWB&&!e.useScreen,expression:"!previewStatus && liveStatus !== 2 && !useWB && !useScreen"}],staticClass:"cameraContain",on:{click:e.toggleVideo}},[s("span",{staticClass:"camera"}),s("span",[e._v("开启摄像头")])]),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.useWB&&!e.useScreen&&e.useLocalStreamListOnlyStudent.length>0,expression:"!useWB && !useScreen && useLocalStreamListOnlyStudent.length > 0"}],staticClass:"cameraContain"},[s("span",{staticClass:"noShare"}),s("span",{staticClass:"noShareText"},[e._v("暂无分享内容")])])]),s("el-row",{staticClass:"handlerSection"},[s("el-col",{staticClass:"mediaSwitch",attrs:{span:18,lg:16}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:2===e.liveStatus,expression:"liveStatus === 2"}],class:{openVideo:e.videoOpen,closeVideo:!e.videoOpen},attrs:{type:"text"},on:{click:e.toggleVideo}}),s("el-button",{directives:[{name:"show",rawName:"v-show",value:2===e.liveStatus,expression:"liveStatus === 2"}],class:{openAudio:e.audioOpen,closeAudio:!e.audioOpen},attrs:{type:"text",disabled:2!==e.liveStatus},on:{click:e.toggleAudio}})],1),s("el-col",{staticClass:"functionSwitch",attrs:{span:6,lg:8}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.useScreen,expression:"!useScreen"}],staticClass:"closeScreen",attrs:{type:"text"},on:{click:e.startScreen}},[s("span",[e._v("开启屏幕共享")])]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.useScreen,expression:"useScreen"}],staticClass:"openScreen",attrs:{type:"text"},on:{click:e.stopScreen}},[s("span",[e._v("关闭屏幕共享")])]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.useWB,expression:"!useWB"}],staticClass:"closeWB",attrs:{type:"text"},on:{click:e.startWhiteRect}},[s("span",[e._v("开启白板")])]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.useWB,expression:"useWB"}],staticClass:"openWB",attrs:{type:"text"},on:{click:e.stopWhiteRect}},[s("span",[e._v("关闭白板")])])],1)],1)],1),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"chatHeader"},[s("span",[e._v("讨论区 （人数: "+e._s(e.userList.length)+" 人）")]),2===e.liveStatus?s("a",{on:{click:function(t){return e.studentBan()}}},[e._v(e._s(e.allBanText))]):e._e()]),s("div",{ref:"chatBody",class:{chatBody:!0,addWB:!1}},[s("ul",e._l(e.chatList,function(t,n){return s("li",{key:n,class:{me:t.id_name===e.idName}},[t.id_name!==e.idName?s("div",{staticClass:"userName"},[s("span",[e._v("学生"+e._s(t.id_name.substr(t.id_name.length-6)))]),s("a",{on:{click:function(s){return e.ban(t,n)}}},[e._v("\n                                        "+e._s(e.banUserArr.includes(t.id_name)?"解禁":"禁言")+"\n                                    ")])]):e._e(),s("div",{staticClass:"userContent"},[e._v(e._s(t.msg_content))])])}),0)]),s("div",{staticClass:"chatFooter"},[s("el-input",{attrs:{placeholder:"输入消息参与互动"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMsg(t)}},model:{value:e.inputMsg,callback:function(t){e.inputMsg=t},expression:"inputMsg"}}),s("el-button",{attrs:{disabled:2!==e.liveStatus||!e.inputMsg},on:{click:e.sendMsg}},[e._v("发送")])],1)])],1)],1)],1)],1)},i=[],r=s("9ab4"),o=s("60a3"),a=s("050b"),u=s("4bb5"),c=s("c4e7"),l=s("b311"),h=s.n(l),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ruleForm={password:""},t.logo=s("5684"),t.bg=s("3f6e"),t.roomId="",t.cp="即构课堂",t.name="即构大班直播课堂",t.appId="",t.userId="",t.liveStatus=0,t.inputMsg="",t.idName=a["a"].idName,t.messageObj={cameraStatus:!1,userId:""},t.allBan=!1,t.allBanText="全员禁言",t.banUserArr=[],t.useWB=!1,t.useScreen=!1,t.setting=!0,t.resolutionSetting=!1,t.visible2=!0,t.redSelect=!0,t.blueSelect=!1,t.earSelect=!1,t.previewStatus=!1,t.videoOpen=!0,t.audioOpen=!0,t.useLocalStreamList=[],t.teachPushStreamId="stream-"+t.userId+"-"+t.appId+"-"+(new Date).getTime(),t.teachPushScreenStreamId="screen-"+t.userId+"-"+t.appId+"-"+(new Date).getTime(),t.startLiveClicked=!1,t}return r["d"](t,e),t.prototype.mounted=function(){var e=this;this.roomId=this.$route.params.roomId,this.cp=this.$route.query.cp,this.name=this.$route.query.name,this.appId=this.$route.query.appId,this.userId=this.$route.query.userId;var t=new URLSearchParams(new URL(location.href).search),s=location.origin+location.pathname.replace("push","student")+"?"+t.toString();this.clipboard=new h.a(".share",{text:function(){return s}}),this.clipboard.on("success",function(){e.$message({message:"成功复制到粘贴板，快去分享吧",type:"success"})}),this.clipboard.on("error",function(){e.$message.error("复制到粘贴板失败，手动复制一下地址吧:"+s)}),a["a"].play=this.play,a["a"].stopPlay=this.stopPlay,a["a"].onStreamExtraInfoUpdated=this.onStreamExtraInfoUpdated,this.teachPushStreamId="stream-"+this.userId+"-"+this.appId+"-"+(new Date).getTime(),this.teachPushScreenStreamId="screen-"+this.userId+"-"+this.appId+"-"+(new Date).getTime()},Object.defineProperty(t.prototype,"useLocalStreamListOnlyStudent",{get:function(){return this.useLocalStreamList.filter(function(e){return e.stream_id.startsWith("student")})},enumerable:!0,configurable:!0}),t.prototype.play=function(e){var t=this;e.extra_info&&"string"===typeof e.extra_info&&(e.extra_info=JSON.parse(e.extra_info)),3!==this.useLocalStreamList.filter(function(e){return e.stream_id.startsWith("student")}).length?(this.useLocalStreamList.push(e),this.$nextTick(function(){a["a"].pull(t.$refs[e.stream_id][0],e.stream_id),1===t.useLocalStreamList.length&&a["a"].reLive(t.$refs.pushVideo2,r["a"]({WBJson:"",withWB:t.useWB?1:0,withScreen:t.useScreen?1:0},t.messageObj),t.teachPushStreamId,!t.videoOpen)})):this.closeStudentPush(e.anchor_id_name)},t.prototype.stopPlay=function(e,t){var s=this.useLocalStreamList.findIndex(function(t){return t.stream_id===e.stream_id});this.useLocalStreamList.splice(s,1),0!==this.useLocalStreamList.length||this.useScreen||this.useWB||a["a"].reLive(this.$refs.pushVideo,r["a"]({WBJson:"",withWB:this.useWB?1:0,withScreen:this.useScreen?1:0},this.messageObj),this.teachPushStreamId,!this.videoOpen)},t.prototype.startLive=function(){var e=this;if(this.startLiveClicked)return!1;this.startLiveClicked=!0,this.stopLive();var t=Number(this.appId);a["a"].login(this.roomId,1,t,this.userId,!0).then(function(t){var s;s=e.useWB||e.useScreen?e.$refs.pushVideo2:e.$refs.pushVideo,a["a"].live(s,e.teachPushStreamId,{WBJson:"",withWB:e.useWB?1:0,withScreen:e.useScreen?1:0},void 0,function(){e.liveStatus=2,e.previewStatus=!1,e.startLiveClicked=!1}),e.useScreen&&a["a"].pushScreen(e.teachPushScreenStreamId)},function(t){console.error(t),e.startLiveClicked=!1,e.$message({message:"开启直播服务失败了！！网络正常连接下，再刷新页面重试一下吧",type:"warning"})})},t.prototype.preview=function(){if(this.previewStatus=!this.previewStatus,this.previewStatus){var e=void 0;this.useScreen?(this.useScreen=!1,a["a"].stopScreen(),e=this.$refs.pushVideo):this.useWB?(this.useWB=!1,e=this.$refs.pushVideo):e=this.$refs.pushVideo,a["a"].preview(e,this.teachPushStreamId,{WBJson:"",withWB:0,withScreen:0}),this.useScreen&&a["a"].pushScreen(this.teachPushScreenStreamId)}else this.stopLive()},t.prototype.stopLive=function(){var e=this;this.liveStatus=3,this.useWB&&this.stopWhiteRect(),this.useScreen&&this.stopScreen(),this.useLocalStreamListOnlyStudent.length>0&&this.useLocalStreamListOnlyStudent.forEach(function(t){e.closeStudentPush(t.anchor_id_name)}),this.videoOpen=!0,this.audioOpen=!0,a["a"].leaveRoom()},t.prototype.sendMsg=function(){this.inputMsg&&(a["a"].sendRoomMsg(this.inputMsg,this.idName),this.setChatInfo([{id_name:this.idName,nick_name:this.idName,role:1,msg_id:"0",msg_category:1,msg_type:1,msg_content:this.inputMsg,send_time:(new Date).getTime()}]),this.inputMsg="",this.$nextTick(function(){document.querySelector(".chatBody").scrollTop=document.querySelector(".chatBody ul li:last-child").offsetTop}))},t.prototype.startWhiteRect=function(){return r["b"](this,void 0,void 0,function(){var e=this;return r["e"](this,function(t){return this.useWB=!0,this.useScreen&&(this.useScreen=!1,a["a"].stopScreen()),this.$nextTick(function(){return r["b"](e,void 0,void 0,function(){var e;return r["e"](this,function(t){switch(t.label){case 0:return e=a["a"].room,[4,a["a"].startWB(this.$refs.pushDIV)];case 1:return t.sent(),2===this.liveStatus&&(e?a["a"].updateStreamExtraInfo(this.teachPushStreamId,JSON.stringify(r["a"]({WBJson:"",withWB:this.useWB?1:0,withScreen:this.useScreen?1:0},this.messageObj))):a["a"].reLive(this.$refs.pushVideo2,r["a"]({WBJson:"",withWB:this.useWB?1:0,withScreen:this.useScreen?1:0},this.messageObj),this.teachPushStreamId,!this.videoOpen)),[2]}})})}),[2]})})},t.prototype.stopWhiteRect=function(){return r["b"](this,void 0,void 0,function(){return r["e"](this,function(e){return this.useWB=!1,2===this.liveStatus&&0===this.useLocalStreamListOnlyStudent.length?a["a"].reLive(this.$refs.pushVideo,r["a"]({WBJson:"",withWB:this.useWB?1:0,withScreen:0},this.messageObj),this.teachPushStreamId,!this.videoOpen):2===this.liveStatus&&a["a"].updateStreamExtraInfo(this.teachPushStreamId,JSON.stringify(r["a"]({withWB:0,withScreen:this.useScreen},this.messageObj))),[2]})})},t.prototype.startScreen=function(){var e=this;2===this.liveStatus?(a["a"].reLive(this.$refs.pushVideo2,r["a"]({WBJson:"",withWB:this.useWB?1:0,withScreen:1},this.messageObj),this.teachPushStreamId,!this.videoOpen),this.$nextTick(function(){a["a"].previewScreen(e.$refs.pushVideoScreen).then(function(){a["a"].pushScreen(e.teachPushScreenStreamId),e.dumpOptionsInfo()},function(t){console.error("屏幕分享预览失败",t),e.stopScreen()})}),this.useWB&&(this.useWB=!1)):(this.previewStatus&&0==this.useWB&&(this.previewStatus=!1,a["a"].stopPreview(this.$refs.pushVideo)),this.useWB&&(this.useWB=!1,this.previewStatus=!1),this.$nextTick(function(){a["a"].previewScreen(e.$refs.pushVideoScreen).then(function(){e.dumpOptionsInfo()},function(t){e.stopScreen()})})),this.useScreen=!0},t.prototype.dumpOptionsInfo=function(){var e=this,t=this.$refs.pushVideoScreen;if(t.srcObject){var s=t.srcObject,n=s.getVideoTracks()[0];n.onended=function(t,s){e.stopScreen()}}},t.prototype.stopScreen=function(){this.useScreen=!1,a["a"].stopScreen(),2===this.liveStatus&&0===this.useLocalStreamListOnlyStudent.length?a["a"].reLive(this.$refs.pushVideo,r["a"]({WBJson:"",withWB:this.useWB?1:0,withScreen:this.useScreen?1:0},this.messageObj),this.teachPushStreamId,!this.videoOpen):2===this.liveStatus&&a["a"].updateStreamExtraInfo(this.teachPushStreamId,JSON.stringify(r["a"]({withScreen:0,withWB:this.useWB},this.messageObj)))},t.prototype.Resolution=function(){this.resolutionSetting=!0,this.setting=!1},t.prototype.initSetting=function(){1==this.resolutionSetting&&(this.setting=!0,this.resolutionSetting=!1)},t.prototype.studentBan=function(){this.previewStatus||(this.allBan=!this.allBan,this.messageObj.studentBan=this.allBan,this.allBan?(this.$message("已全员禁言"),this.allBanText="全员解禁"):this.allBanText="全员禁言",a["a"].updateStreamExtraInfo(this.teachPushStreamId,JSON.stringify(r["a"]({withWB:this.useWB,withScreen:this.useScreen},this.messageObj))))},t.prototype.ban=function(e,t){this.messageObj.userId=e.id_name,a["a"].sendCustomCommand([""],this.messageObj),this.banUserArr.includes(e.id_name)?this.banUserArr.splice(this.banUserArr.findIndex(function(t){return t===e.id_name}),1):this.banUserArr.push(e.id_name)},t.prototype.toggleVideo=function(){2==this.liveStatus?(this.videoOpen=!this.videoOpen,a["a"].toggleVideo(this.videoOpen),this.messageObj.cameraStatus=!this.videoOpen,a["a"].updateStreamExtraInfo(this.teachPushStreamId,JSON.stringify(r["a"]({withWB:this.useWB,withScreen:this.useScreen},this.messageObj)))):this.preview()},t.prototype.toggleAudio=function(){this.audioOpen=!this.audioOpen,a["a"].toggleAudio(this.audioOpen)},t.prototype.pencli=function(e){var t=a["a"].room.state.memberState.currentApplianceName;"eraser"==t&&(a["a"].room.setMemberState({currentApplianceName:"pencil"}),t=a["a"].room.state.memberState.currentApplianceName,console.log(!this.earSelect)),"pencil"==t&&("red"==e?(this.$message("已选中红色笔"),a["a"].room.setMemberState({strokeColor:[247,19,11]}),this.redSelect||(this.redSelect=!0,this.blueSelect=!1,this.earSelect=!1)):(a["a"].room.setMemberState({strokeColor:[18,86,229]}),this.$message("已选中蓝色笔"),this.blueSelect||(this.blueSelect=!0,this.redSelect=!1,this.earSelect=!1)))},t.prototype.redPencli=function(){a["a"].room.setMemberState({strokeColor:[247,19,11]})},t.prototype.eraser=function(){a["a"].room.setMemberState({currentApplianceName:"eraser"}),this.$message("已选中橡皮擦"),this.earSelect||(this.earSelect=!0,this.redSelect=!1,this.blueSelect=!1)},t.prototype.closeStudentPush=function(e){var t=this;a["a"].endJoinLive(e,function(){},function(){}),setTimeout(function(){var s,n=0;t.useLocalStreamList.forEach(function(t,i){t.anchor_id_name===e&&(s=t.stream_id,n=i)}),s&&(t.useLocalStreamList.splice(n,1),a["a"].sendReliableMsgToDelete(s),0!==t.useLocalStreamList.length||t.useScreen||t.useWB||a["a"].reLive(t.$refs.pushVideo,r["a"]({WBJson:"",withWB:t.useWB?1:0,withScreen:t.useScreen?1:0},t.messageObj),t.teachPushStreamId,!t.videoOpen))},1500)},t.prototype.onStreamExtraInfoUpdated=function(e){this.useLocalStreamList=this.useLocalStreamList.map(function(t){return e.forEach(function(e){t.stream_id===e.stream_id&&(t.extra_info=JSON.parse(e.extra_info))}),t})},t.prototype.startHover=function(e){this.useLocalStreamList=this.useLocalStreamList.map(function(t){return t.showClose=t.stream_id===e,t})},t.prototype.endHover=function(e){this.useLocalStreamList=this.useLocalStreamList.map(function(e){return e.showClose=!1,e})},r["c"]([Object(u["b"])("userList")],t.prototype,"userList",void 0),r["c"]([Object(u["b"])("chatList")],t.prototype,"chatList",void 0),r["c"]([Object(u["a"])(c["d"])],t.prototype,"setChatInfo",void 0),t=r["c"]([Object(o["a"])({})],t),t}(o["d"]),p=d,f=p,m=(s("447a"),s("2877")),v=Object(m["a"])(f,n,i,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-4dc0ed74.4e92534b.js.map