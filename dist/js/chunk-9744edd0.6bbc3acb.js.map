{"version":3,"sources":["webpack:///./src/views/studentPhone/startLive.vue?2abe","webpack:///./src/views/studentPhone/startLive.vue","webpack:///./src/views/studentPhone/startLive.vue?2ee0","webpack:///./src/views/studentPhone/startLive.vue?bd6b","webpack:///./src/views/studentPhone/startLive.vue?df83","webpack:///./src/assets/images/UnliveBg.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","id","directives","name","rawName","value","expression","on","click","initScreen","autoplay","playsinline","muted","domProps","iosVideo2","microMessenger","_e","style","initClick","_v","oneClickVideo","closeText","clickedToPlay","staticStyle","position","width","top","font-size","color","_l","student","key","stream_id","refInFor","extra_info","video","class","audio","control","addWB","useWB","useScreen","tab-click","handleClick","model","callback","$$v","activeName","label","chatBody","chatBodyWeb","height","isIos","chat","index","me","id_name","idName","teacher","hostIdName","_s","substr","length","msg_content","trigger","placement","command","handleCommand","slot","hideLive","openPush","isStudentPushed","closePush","stOpenAudio","stPushAudioOpen","stCloseAudio","stOpenVideo","stPushVideoOpen","stCloseVideo","safari","openAudio","audioOpen","closeAudio","placeholder","inputMsg","disabled","liveStatus","allBan","sendMsg","roomId","userList","staticRenderFns","startLivevue_type_script_lang_ts_StartLive","_super","StartLive","_this","apply","arguments","unLive","__webpack_require__","startTime","title","userId","appId","personNum","oneClickVideo2","webrtcService","isLastOne","iosVideo","initPlay","initPlay2","useLocalStreamList","videoStyle","padding-left","studentPushStreamId","Date","getTime","tslib_es6","prototype","watchBoolean","val","watchAllBanBoolean","$notify","message","type","mounted","isWeChat","navigator","userAgent","includes","test","$route","query","params","myBrowser","startLive","play","stopPlay","onRecvEndJoinLiveCommand","onStreamExtraInfoUpdated","initSound","beforeDestroy","testPlay","document","addEventListener","getElementById","stream","k","findIndex","s","splice","videoStyleChange","console","log","setTimeout","logOut","Number","login","then","list","forEach","setStartStatus","err","error","$message","JSON","parse","filter","startsWith","push","pull","$refs","pushVideo2","$nextTick","toggleAudio","withWB","withScreen","store","commit","mutations","cameraStatus","studentBan","targetVideo","pushVideo","room","joinWB","pushDIV","WBJson","useLocalStreamListOnlyStudent","anchor_id_name","keep","Object","defineProperty","count","styleObject","togglePushStudent","some","preview","pushtStudentVideo","stopPreview","stopPublish","sendRoomMsg","setChatInfo","nick_name","role","msg_id","msg_category","msg_type","send_time","querySelector","scrollTop","offsetTop","tab","event","fontSizeChange","leaveRoom","stopWB","$router","location","pathname","replace","search","created","indexOf","once","toggleStAudio","toggleStVideo","requestId","from_userid","from_username","roomid","toggleVideo","updateStreamExtraInfo","stringify","streamList","map","extra_info_1","lib","vue_property_decorator","startLivevue_type_script_lang_ts_","studentPhone_startLivevue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_startLive_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_startLive_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n","module","exports","p"],"mappings":"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","file":"js/chunk-9744edd0.6bbc3acb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"startLive\"},[_c('div',{ref:\"liveMain\",staticClass:\"liveMain\",attrs:{\"id\":\"liveMain\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.useWB),expression:\"useWB\"}],ref:\"pushDIV\",staticClass:\"whiteboard\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.useScreen),expression:\"useScreen\"}],staticClass:\"pushivideoBox\",on:{\"click\":_vm.initScreen}},[_c('video',{ref:\"pushVideo2\",attrs:{\"id\":\"pushVideo2\",\"autoplay\":\"\",\"playsinline\":\"\",\"muted\":\"\"},domProps:{\"muted\":true}}),(_vm.iosVideo2 && _vm.microMessenger)?_c('div',{staticClass:\"playIcon2\"}):_vm._e()]),_c('div',{staticClass:\"localVideo\"},[_c('div',{staticClass:\"videoContainer\",style:(_vm.videoStyle),on:{\"click\":_vm.initClick}},[_c('video',{ref:\"pushVideo\",attrs:{\"id\":\"pushVideo\",\"playsinline\":\"\"}}),_c('span',[_vm._v(\"老师\")]),(!_vm.oneClickVideo)?_c('div',{staticClass:\"playIcon\"}):_vm._e(),(_vm.closeText && _vm.clickedToPlay)?_c('div',{staticStyle:{\"position\":\"absolute\",\"width\":\"100%\",\"top\":\"45%\",\"font-size\":\"12px\",\"color\":\"white\"}},[_vm._v(\"\\n                    等待老师连接....\\n                \")]):_vm._e()]),(_vm.isStudentPushed)?_c('div',{staticClass:\"videoContainer\",style:(_vm.videoStyle)},[_c('video',{ref:\"pushtStudentVideo\",attrs:{\"autoplay\":\"\",\"muted\":\"\",\"playsinline\":\"\"},domProps:{\"muted\":true}}),_c('span',[_vm._v(\"我\")])]):_vm._e(),_vm._l((_vm.useLocalStreamListOnlyStudent),function(student){return _c('div',{key:student.stream_id,staticClass:\"videoContainer\",style:(_vm.videoStyle)},[_c('video',{ref:student.stream_id,refInFor:true,attrs:{\"autoplay\":\"\",\"muted\":\"\",\"playsinline\":\"\"},domProps:{\"muted\":true}}),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(student.extra_info && !student.extra_info.video),expression:\"student.extra_info && !student.extra_info.video\"}],class:[!student.extra_info.audio ? 'noAudioVideo' : 'onlyAudio']}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(student.extra_info && student.extra_info.video && !student.extra_info.audio),expression:\"student.extra_info && student.extra_info.video && !student.extra_info.audio\"}]},[_vm._v(\"麦克风未打开\")])])})],2),_c('div',{class:{ control: true, addWB: _vm.useWB || _vm.useScreen }},[_c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"聊天\",\"name\":\"first\"}},[_c('div',{staticClass:\"chat\"},[_c('div',{class:{ chatBody: true, chatBodyWeb: _vm.useWB || _vm.useScreen },style:({ height: !_vm.isIos && _vm.microMessenger ? '100%' : 'calc(100% - 52px)' })},[_c('ul',_vm._l((_vm.chatList),function(chat,index){return _c('li',{key:index,class:{ me: chat.id_name === _vm.idName, teacher: _vm.hostIdName === chat.id_name }},[(chat.id_name !== _vm.idName)?_c('div',{staticClass:\"userName\"},[_c('p',[_c('span',{staticStyle:{\"color\":\"#7745FF\"}},[_vm._v(_vm._s(_vm.hostIdName !== chat.id_name ? '学生' : '老师')+\" \")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hostIdName == chat.id_name),expression:\"hostIdName == chat.id_name\"}]},[_vm._v(\"：\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hostIdName !== chat.id_name),expression:\"hostIdName !== chat.id_name\"}]},[_vm._v(_vm._s(chat.id_name.substr(chat.id_name.length - 6)))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hostIdName !== chat.id_name),expression:\"hostIdName !== chat.id_name\"}]},[_vm._v(\"：\")])])]):_vm._e(),(chat.id_name == _vm.idName)?_c('div',{staticClass:\"myColor\"},[_vm._v(\"我：\")]):_vm._e(),_c('div',{staticClass:\"userContent\"},[_c('p',[_c('span',[_vm._v(_vm._s(chat.msg_content))])])])])}),0)]),_c('div',{staticClass:\"chatFooter\"},[_c('el-dropdown',{attrs:{\"trigger\":\"click\",\"placement\":\"top-start\"},on:{\"command\":_vm.handleCommand}},[_c('span',{staticClass:\"studentHandler\"}),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hideLive),expression:\"!hideLive\"}],staticClass:\"studentPush\",attrs:{\"command\":\"1\"}},[_c('span',{class:{ openPush: !_vm.isStudentPushed, closePush: _vm.isStudentPushed }},[_vm._v(\"\\n                                            \"+_vm._s(_vm.isStudentPushed ? '下讲台' : '上讲台')+\"\\n                                        \")])]),_c('el-dropdown-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isStudentPushed),expression:\"isStudentPushed\"}],attrs:{\"command\":\"2\"}},[_c('span',{class:{\n                                                stOpenAudio: _vm.stPushAudioOpen,\n                                                stCloseAudio: !_vm.stPushAudioOpen,\n                                            }},[_vm._v(\"麦克风\")])]),_c('el-dropdown-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isStudentPushed),expression:\"isStudentPushed\"}],attrs:{\"command\":\"3\"}},[_c('span',{class:{\n                                                stOpenVideo: _vm.stPushVideoOpen,\n                                                stCloseVideo: !_vm.stPushVideoOpen,\n                                            }},[_vm._v(\"摄像头\")])]),_c('el-dropdown-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!(_vm.isIos && _vm.safari)),expression:\"!(isIos && safari)\"}],attrs:{\"command\":\"4\"}},[_c('span',{class:{ openAudio: _vm.audioOpen, closeAudio: !_vm.audioOpen }},[_vm._v(\"扬声器\")])])],1)],1),_c('el-input',{attrs:{\"placeholder\":\"输入消息参与互动\"},model:{value:(_vm.inputMsg),callback:function ($$v) {_vm.inputMsg=$$v},expression:\"inputMsg\"}}),_c('el-button',{attrs:{\"disabled\":_vm.liveStatus !== 2 || !_vm.inputMsg || _vm.allBan},on:{\"click\":_vm.sendMsg}},[_vm._v(\"发送\")])],1)])]),_c('el-tab-pane',{attrs:{\"label\":\"课程信息\",\"name\":\"second\"}},[_c('div',{staticClass:\"information\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"考证通直播平台\")]),_c('div',{staticClass:\"clearfix\"},[_c('span',{staticClass:\"roomId\"},[_vm._v(\"ID: \"+_vm._s(_vm.roomId))]),_c('span',{staticClass:\"personNum\"},[_vm._v(\"共\"+_vm._s(_vm.userList.length)+\"人上课\")])])])])],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport webrtcService from '@/service/webrtcService';\nimport { ChatInfo, StreamInfo } from 'webrtc-zego/sdk/common/zego.entity';\nimport { State, Mutation } from 'vuex-class';\nimport { setChatInfo, setStartStatus, setCameraStatus, setAllStudentStatus } from '@/store/mutations';\nimport store from '@/store';\n@Component({})\nexport default class StartLive extends Vue {\n    unLive = require('../../assets/images/UnliveBg.png');\n    startTime = '2019.09.02 10:30';\n    title = '';\n    activeName = 'first';\n    roomId: string = '';\n    userId: string = '';\n    appId: string = '';\n    personNum = 222;\n    closeText = false;\n    allBan = false;\n    oneClickVideo = false;\n    oneClickVideo2 = false;\n\n    liveStatus: 1 | 2 | 3 | 4 = 1;\n    inputMsg = '';\n    idName = webrtcService.idName;\n    hostIdName!: string;\n    isLastOne = false;\n    useWB = false;\n    useScreen = false;\n    isIos = false;\n    iosVideo = false;\n    iosVideo2 = false;\n    microMessenger = false;\n    safari = false;\n    initPlay = true;\n    initPlay2 = true;\n    clickedToPlay = false;\n    targetVideo!: HTMLVideoElement;\n    hideLive = false;\n    @State('userList')\n    userList!: any[];\n    @State('chatList')\n    chatList!: ChatInfo[];\n    @State('cameraStatus')\n    cameraStatus!: boolean;\n    @State('isAllBan')\n    isAllBan!: boolean;\n    @Mutation(setChatInfo)\n    setChatInfo!: (p: ChatInfo[]) => void;\n    @Mutation(setStartStatus)\n    setStartStatus!: (p: 0 | 1 | 2) => void;\n    @Mutation(setCameraStatus)\n    setCameraStatus!: (camera: boolean) => void;\n    @Watch('cameraStatus')\n    watchBoolean(val: boolean) {\n        this.closeText = val;\n    }\n    @Watch('isAllBan')\n    watchAllBanBoolean(val: boolean) {\n        if (val == true) {\n            this.allBan = true;\n            this.$notify({\n                title: '警告',\n                message: '老师已全员禁言',\n                type: 'warning',\n            });\n        } else {\n            this.allBan = false;\n        }\n    }\n\n    // method\n\n    mounted() {\n        const isWeChat = navigator.userAgent.includes('MicroMessenger'); //取得浏览器的userAgent字符串\n        const isIos = /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent);\n        this.hideLive = isWeChat && isIos && this.$route.query.appId === '2172413822';\n        this.roomId = this.$route.params.roomId;\n        this.isIos = isIos;\n        this.myBrowser();\n        this.iosVideo = this.isIos;\n        this.iosVideo2 = this.isIos;\n        this.audioOpen = !this.isIos;\n        // this.cp = this.$route.query.cp as string;\n        this.title = this.$route.query.name as string;\n        this.userId = this.$route.query.userId as string;\n        this.appId = this.$route.query.appId as string;\n        this.startLive();\n        webrtcService.play = this.play;\n        webrtcService.stopPlay = this.stopPlay;\n        webrtcService.onRecvEndJoinLiveCommand = this.onRecvEndJoinLiveCommand;\n        webrtcService.onStreamExtraInfoUpdated = this.onStreamExtraInfoUpdated;\n        this.initSound();\n    }\n\n    beforeDestroy() {\n        webrtcService.play = () => {};\n        webrtcService.stopPlay = () => {};\n        webrtcService.onRecvEndJoinLiveCommand = () => {};\n        webrtcService.onStreamExtraInfoUpdated = () => {};\n    }\n\n    testPlay() {\n        document.addEventListener(\n            'WeixinJSBridgeReady',\n            function() {\n                let video = document.getElementById('pushVideo') as HTMLVideoElement;\n                video.play();\n            },\n            false,\n        );\n    }\n\n    stopPlay(stream: StreamInfo, isLastOne: boolean) {\n        const k = this.useLocalStreamList.findIndex(s => s.stream_id === stream.stream_id);\n        this.useLocalStreamList.splice(k, 1);\n        this.videoStyleChange();\n\n        // this.useWB = false;\n        this.isLastOne = isLastOne;\n        console.log('stopPlay', stream);\n        // 最后一条流，退出10秒内没有新流进来，视为课程结束\n        if (this.isLastOne) {\n            setTimeout(() => {\n                if (this.isLastOne) this.logOut();\n            }, 10000);\n        }\n    }\n\n    startLive() {\n        let appId = Number(this.appId);\n        webrtcService.login(this.roomId, 2, appId, this.userId).then(\n            (list: StreamInfo[]) => {\n                this.liveStatus = 2;\n                // 主播未开始\n                if (list.length === 0) {\n                    this.logOut();\n                } else {\n                    // 开始拉流\n                    list.forEach(stream => {\n                        // 开始拉流\n                        this.play(stream);\n                    });\n                    this.setStartStatus(1);\n                }\n            },\n            err => {\n                console.error(err);\n                this.$message({\n                    message: '开启直播服务失败了！！网络正常连接下，再刷新页面重试一下吧',\n                    type: 'warning',\n                });\n            },\n        );\n    }\n\n    play(stream: StreamInfo) {\n        stream.extra_info &&\n            typeof stream.extra_info === 'string' &&\n            (stream.extra_info = JSON.parse(stream.extra_info));\n        if (this.useLocalStreamList.filter(s => s.stream_id.startsWith('student')).length < 3) {\n            this.useLocalStreamList.push(stream);\n            this.videoStyleChange();\n        }\n        // 开始拉流\n        const extra_info: any = stream.extra_info;\n\n        // 拉屏幕共享\n        if (stream.stream_id.startsWith('screen')) {\n            this.useWB = false;\n            this.useScreen = true;\n            webrtcService.pull(this.$refs.pushVideo2 as HTMLVideoElement, stream.stream_id);\n            return;\n        } else if (stream.stream_id.startsWith('student')) {\n            this.$nextTick(() => {\n                if (this.$refs[stream.stream_id] && !!(this.$refs[stream.stream_id] as HTMLVideoElement[])[0]) {\n                    // 拉学生流\n                    webrtcService.pull((this.$refs[stream.stream_id] as HTMLVideoElement[])[0], stream.stream_id);\n                } else {\n                    setTimeout(() => {\n                        // 拉学生流\n                        webrtcService.pull((this.$refs[stream.stream_id] as HTMLVideoElement[])[0], stream.stream_id);\n                    }, 1000);\n                }\n                this.toggleAudio(true);\n            });\n            return;\n        }\n\n        this.useWB = extra_info.withWB === 1;\n        this.useScreen = extra_info.withScreen === 1;\n        store.commit(setCameraStatus, extra_info.cameraStatus);\n        store.commit(setAllStudentStatus, extra_info.studentBan);\n        //首次进入同时有白板和屏幕共享时bug\n        this.useScreen && (this.useWB = false);\n        if (this.useWB) {\n            this.useScreen = false;\n            this.targetVideo = this.$refs.pushVideo as HTMLVideoElement;\n            !webrtcService.room &&\n                this.$nextTick(() => {\n                    webrtcService.joinWB(this.$refs.pushDIV as HTMLDivElement, extra_info.WBJson, true, true);\n                });\n        } else if (\n            extra_info.withScreen === 1 ||\n            this.useLocalStreamListOnlyStudent.length > 0 ||\n            this.isStudentPushed\n        ) {\n            this.useWB = false;\n            this.targetVideo = this.$refs.pushVideo as HTMLVideoElement;\n        } else {\n            this.targetVideo = this.$refs.pushVideo as HTMLVideoElement;\n        }\n        this.targetVideo = this.$refs.pushVideo as HTMLVideoElement;\n        webrtcService.pull(this.targetVideo, stream.stream_id);\n        this.oneClickVideo = false;\n        // this.targetVideo.pause();\n        // this.clickedToPlay = false;\n        this.isLastOne = false;\n        this.hostIdName = stream.anchor_id_name;\n\n        // this.toggleAudio(true);\n    }\n\n    audioOpen = true;\n    toggleAudio(keep = false) {\n        // console.log(this.audioOpen)\n        if (!keep) {\n            this.audioOpen = !this.audioOpen;\n        }\n        !this.isIos &&\n            this.useLocalStreamListOnlyStudent.forEach(stream => {\n                if (this.$refs[stream.stream_id] && !!((this.$refs[stream.stream_id] as any)[0] as HTMLVideoElement)) {\n                    ((this.$refs[stream.stream_id] as any)[0] as HTMLVideoElement).muted = !this.audioOpen;\n                }\n            });\n        !this.isIos && (this.targetVideo.muted = !this.audioOpen);\n    }\n    useLocalStreamList: StreamInfo[] = [];\n\n    get useLocalStreamListOnlyStudent() {\n        return this.useLocalStreamList.filter(s => s.stream_id.startsWith('student'));\n    }\n\n    videoStyle: any = {\n        width: '100vw',\n        'padding-left': '0px',\n        height: '100%',\n    };\n    videoStyleChange() {\n        let count = 0;\n        this.useLocalStreamList.forEach(stream => {\n            if (stream.stream_id.startsWith('stream') || stream.stream_id.startsWith('student')) {\n                ++count;\n            }\n        });\n        this.isStudentPushed && ++count;\n\n        let styleObject = {\n            width: 100 / count + 'vw',\n            'padding-left': '0px',\n            height: '100%',\n        };\n        if (count > 2) {\n            styleObject['padding-left'] = '5px';\n            styleObject.height = '50%';\n        }\n        this.videoStyle = styleObject;\n    }\n    isStudentPushed: boolean = false;\n    studentPushStreamId = 'student' + new Date().getTime();\n    togglePushStudent() {\n        if (this.useLocalStreamListOnlyStudent.length >= 3) {\n            this.$notify({\n                title: '警告',\n                message: '讲台人数已经超过3人，不能再上讲台',\n                type: 'warning',\n            });\n            return;\n        }\n\n        if (!this.useLocalStreamList.some(stream => stream.stream_id.startsWith('stream'))) {\n            this.$notify({\n                title: '警告',\n                message: '老师暂时离开，此时不能上讲台',\n                type: 'warning',\n            });\n            return;\n        }\n\n        this.isStudentPushed = !this.isStudentPushed;\n        this.videoStyleChange();\n\n        if (this.isStudentPushed) {\n            this.$nextTick(() => {\n                webrtcService.preview(this.$refs.pushtStudentVideo as HTMLVideoElement, this.studentPushStreamId, {\n                    withWB: 0,\n                    withScreen: 0,\n                    WBJson: '',\n                    audio: true,\n                    video: true,\n                });\n            });\n        } else {\n            webrtcService.stopPreview(this.$refs.pushtStudentVideo as HTMLVideoElement);\n            webrtcService.stopPublish(this.studentPushStreamId);\n        }\n    }\n\n    sendMsg() {\n        if (this.inputMsg) {\n            webrtcService.sendRoomMsg(this.inputMsg, this.idName);\n            this.setChatInfo([\n                {\n                    id_name: this.idName,\n                    nick_name: this.idName,\n                    role: 1,\n                    msg_id: '0',\n                    msg_category: 1,\n                    msg_type: 1,\n                    msg_content: this.inputMsg,\n                    send_time: new Date().getTime(),\n                },\n            ]);\n\n            this.inputMsg = '';\n\n            this.$nextTick(() => {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                document!.querySelector('.chatBody')!.scrollTop = (document!.querySelector(\n                    '.chatBody ul li:last-child',\n                )! as any).offsetTop!;\n            });\n        }\n    }\n    handleClick(tab: string, event: any) {\n        console.log(tab, event);\n    }\n    fontSizeChange() {}\n\n    logOut() {\n        this.setStartStatus(2);\n        webrtcService.leaveRoom();\n        webrtcService.stopWB();\n        this.$router.push(location.pathname.replace('pull', 'student') + location.search);\n    }\n    initClick() {\n        if (!this.oneClickVideo) {\n            let video = document.getElementById('pushVideo') as HTMLVideoElement;\n            video.play();\n            this.oneClickVideo = true;\n            // this.initPlay = false;\n            // video.muted = false;\n            if (this.isIos) {\n                this.iosVideo = false;\n            }\n        }\n    }\n    initScreen() {\n        if (!this.oneClickVideo2) {\n            // alert(this.oneClickVideo2)\n            let iosVideo2 = document.getElementById('pushVideo2') as HTMLVideoElement;\n            iosVideo2.play();\n            this.oneClickVideo2 = true;\n            // this.initPlay2 = false;\n            // iosVideo2.muted = false;\n            if (this.isIos) {\n                this.iosVideo2 = false;\n            }\n        }\n    }\n    created() {\n        this.fontSizeChange();\n    }\n    myBrowser() {\n        let userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\n        let isOpera = userAgent.indexOf('Opera') > -1;\n        // alert(userAgent)\n        if (isOpera) {\n            // alert('Opera')\n            // return 'Opera';\n        } //判断是否Opera浏览器\n        if (userAgent.indexOf('Firefox') > -1) {\n            // alert('FF')\n            //return 'FF';\n        } //判断是否Firefox浏览器\n        if (userAgent.indexOf('Chrome') > -1) {\n            // alert('Chrome')\n            //return 'Chrome';\n        }\n        if (userAgent.indexOf('Safari') > -1) {\n            // alert('Safari')\n            // alert(userAgent.indexOf('Safari'))\n            this.safari = true;\n            //return 'Safari';\n        } //判断是否Safari浏览器\n        if (userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1 && !isOpera) {\n            //return 'IE';\n        } //判断是否IE浏览器\n        if (userAgent.indexOf('wxwork') > -1) {\n            // alert('wxwork')\n            // return 'wxwork';\n        }\n        if (userAgent.indexOf('MicroMessenger') > -1) {\n            // alert('MicroMessenger')\n            this.microMessenger = true;\n            // return 'MicroMessenger';\n        }\n    }\n\n    initSound() {\n        let video = this.$refs.pushVideo as HTMLVideoElement;\n        // alert(video);\n        video.addEventListener(\n            'playing',\n            () => {\n                this.$nextTick(() => {\n                    video.muted = false;\n                    video.play();\n                });\n            },\n            { once: false },\n        );\n    }\n\n    handleCommand(command: number) {\n        if (command == 1) {\n            this.togglePushStudent();\n        } else if (command == 2) {\n            this.toggleStAudio();\n        } else if (command == 3) {\n            this.toggleStVideo();\n        } else if (command == 4) {\n            this.toggleAudio();\n        }\n    }\n\n    // 接收老师断开连麦，学生再断开\n    onRecvEndJoinLiveCommand(requestId: string, from_userid: string, from_username: string, roomid: string) {\n        this.isStudentPushed && this.togglePushStudent();\n    }\n\n    stPushVideoOpen = true;\n    stPushAudioOpen = true;\n    // 学生端推流视频开关\n    toggleStVideo() {\n        this.stPushVideoOpen = !this.stPushVideoOpen;\n        webrtcService.toggleVideo(this.stPushVideoOpen);\n        webrtcService.updateStreamExtraInfo(\n            this.studentPushStreamId,\n            JSON.stringify({\n                audio: this.stPushAudioOpen,\n                video: this.stPushVideoOpen,\n            }),\n        );\n    }\n\n    // 学生端推流麦克风开关\n    toggleStAudio() {\n        this.stPushAudioOpen = !this.stPushAudioOpen;\n        webrtcService.toggleAudio(this.stPushAudioOpen);\n        webrtcService.updateStreamExtraInfo(\n            this.studentPushStreamId,\n            JSON.stringify({\n                audio: this.stPushAudioOpen,\n                video: this.stPushVideoOpen,\n            }),\n        );\n    }\n\n    // 监听到对应学生推流画面，声音开关\n    onStreamExtraInfoUpdated(streamList: StreamInfo[]) {\n        this.useLocalStreamList = this.useLocalStreamList.map(stream => {\n            streamList.forEach(s => {\n                if (stream.stream_id === s.stream_id) {\n                    stream.extra_info = JSON.parse(s.extra_info);\n                }\n            });\n\n            return stream;\n        });\n\n        // 单关闭白板\n        streamList.forEach(stream => {\n            if (stream.stream_id.startsWith('stream')) {\n                let extra_info = JSON.parse(stream.extra_info);\n                // 白板开关逻辑\n                if (typeof extra_info.withWB === 'number') {\n                    if (extra_info.withWB === 0) {\n                        this.useWB = false;\n                    } else if (extra_info.withWB === 1) {\n                        this.useWB = true;\n                        !webrtcService.room &&\n                            this.$nextTick(() => {\n                                webrtcService.joinWB(\n                                    this.$refs.pushDIV as HTMLDivElement,\n                                    extra_info.WBJson,\n                                    false,\n                                    true,\n                                );\n                            });\n                    }\n                }\n\n                if (extra_info.withScreen === 0) {\n                    this.useScreen = false;\n                }\n            }\n        });\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./startLive.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./startLive.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./startLive.vue?vue&type=template&id=65f6c20a&\"\nimport script from \"./startLive.vue?vue&type=script&lang=ts&\"\nexport * from \"./startLive.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./startLive.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./startLive.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./startLive.vue?vue&type=style&index=0&lang=less&\"","module.exports = __webpack_public_path__ + \"img/UnliveBg.6edd5470.png\";"],"sourceRoot":""}