{"version":3,"sources":["webpack:///./src/service/room.ts","webpack:///./src/assets/images/LiveEndBg.png","webpack:///./src/assets/images/UnliveBg.png","webpack:///./src/views/studentPC/index.vue?0ba7","webpack:///./src/views/studentPC/index.vue","webpack:///./src/views/studentPC/index.vue?d785","webpack:///./src/views/studentPC/index.vue?6963","webpack:///./src/views/studentPC/index.vue?15ab"],"names":["_api__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","Room","classCreate","room_key","room_name","user_id","start_time","anchor_name","post","classRoomlist","get","params","classModify","room_id","classTitle","title","classRoom","classDelete","appAdd","app_id","app_sign","appModify","flowLimit","module","exports","p","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","cp","style","backgroundImage","bg","status","name","time","replace","staticRenderFns","studentPCvue_type_script_lang_ts_Index","_super","Index","_this","apply","arguments","roomId","appId","userId","supportCheck","tslib_es6","prototype","mounted","jZego_rtc","supportDetection","result","console","warn","webRtc","videoDecodeType","VP8","info","push","$message","warning","join","$route","query","checkRoomExist","log","$router","room","then","res","msg","code","exist","Number","webrtcService","login","list","length","setTimeout","fullPath","err","error","Object","lib","mutations","vue_property_decorator","studentPCvue_type_script_lang_ts_","views_studentPCvue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_347d56df_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_347d56df_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-de9f2708.08ad2011.js","sourcesContent":["import {\n    classRoomlist,\n    classCreate,\n    classModify,\n    classDelete,\n    classTitle,\n    classRoom,\n    appAdd,\n    appModify,\n    flowLimit,\n    fetch,\n} from './api';\n\nexport default class Room {\n    public static classCreate(\n        room_key: string,\n        room_name: string,\n        user_id: string,\n        start_time: string,\n        anchor_name: string,\n    ): Promise<any> {\n        return fetch.post(classCreate, {\n            room_name,\n            room_key,\n            user_id,\n            start_time,\n            anchor_name,\n        });\n    }\n\n    public static classRoomlist(user_id: string): Promise<any> {\n        return fetch.get(classRoomlist, {\n            params: { user_id },\n        });\n    }\n\n    public static classModify(\n        room_key: string,\n        room_name: string,\n        user_id: string,\n        start_time: string,\n        anchor_name: string,\n        room_id: string,\n    ): Promise<any> {\n        return fetch.post(classModify, {\n            room_name,\n            room_key,\n            user_id,\n            start_time,\n            anchor_name,\n            room_id,\n        });\n    }\n\n    public static classTitle(user_id: string, title: string): Promise<any> {\n        return fetch.post(classTitle, {\n            user_id,\n            title,\n        });\n    }\n\n    public static classRoom(room_id: string): Promise<any> {\n        return fetch.get(classRoom, {\n            params: { room_id },\n        });\n    }\n\n    public static classDelete(room_id: string, user_id: string): Promise<any> {\n        return fetch.post(classDelete, {\n            room_id,\n            user_id,\n        });\n    }\n\n    public static appAdd(user_id: string, app_id: number, app_sign: string): Promise<any> {\n        return fetch.post(appAdd, {\n            app_id,\n            user_id,\n            app_sign,\n        });\n    }\n\n    public static appModify(user_id: string, app_id: number, app_sign: string): Promise<any> {\n        return fetch.post(appModify, {\n            app_id,\n            user_id,\n            app_sign,\n        });\n    }\n\n    // 流量查询\n    public static flowLimit(user_id: string, app_id: number): Promise<any> {\n        return fetch.post(flowLimit, {\n            app_id,\n            user_id,\n        });\n    }\n}\n","module.exports = __webpack_public_path__ + \"img/LiveEndBg.1f4533d3.png\";","module.exports = __webpack_public_path__ + \"img/UnliveBg.6edd5470.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"student\"},[_c('el-container',[_c('el-header',[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"headerTitle\"},[_vm._v(_vm._s(_vm.cp))])])]),_c('el-main',[_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"mainImg\",style:({ backgroundImage: (\"url(\" + _vm.bg + \")\") })}),_c('div',{staticClass:\"mainTitle\"},[_c('div',[_vm._v(_vm._s(_vm.status))]),_c('p',[_vm._v(_vm._s(_vm.name))]),_c('span',[_vm._v(\"\\n                        开始时间:\\n                        \"+_vm._s(_vm.time\n                                .replace('-', '年')\n                                .replace('-', '月')\n                                .replace('-', '日')\n                                .replace('20', ''))+\"\\n                    \")])])])]),_c('el-footer',[_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"footerText\"})])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from 'vue-property-decorator';\nimport Room from '@/service/room';\nimport { Mutation, State } from 'vuex-class';\nimport { setLoginStatus } from '@/store/mutations';\nimport webrtcService from '@/service/webrtcService';\nimport { ChatInfo, StreamInfo } from 'webrtc-zego/sdk/common/zego.entity';\nimport { ZegoClient } from 'webrtc-zego';\n@Component({})\nexport default class Index extends Vue {\n    bg = require('../../assets/images/UnliveBg.png');\n\n    roomId: string = '';\n    cp = '即构课堂';\n    name = '即构大班直播课堂';\n    time = '2019-10-10 12:00';\n    appId = '';\n    userId = '';\n\n    status = '直播还未开始，请稍后';\n    @State('isStart')\n    isStart!: 0 | 1 | 2;\n    @Mutation(setLoginStatus)\n    setLoginStatus!: (login: boolean) => void;\n    supportCheck = true;\n    mounted() {\n        ZegoClient.supportDetection(\n            (result: {\n                capture: boolean;\n                screenSharing: boolean;\n                webRtc: boolean;\n                videoDecodeType: {\n                    VP8: boolean;\n                };\n            }) => {\n                console.warn('supportDetection', result);\n                if (!result.webRtc || !result.videoDecodeType.VP8) {\n                    let info = ['当前浏览器不支持:'];\n                    !result.webRtc && info.push('webrtc,');\n                    !result.videoDecodeType.VP8 && info.push('vp8视频编码,');\n                    info.push('建议使用chrome72+打开该页面');\n                    this.$message.warning(info.join());\n                    this.supportCheck = false;\n                }\n            },\n            () => {\n                this.$message.warning('建议使用chrome72+打开该页面');\n                this.supportCheck = false;\n            },\n        );\n        this.roomId = this.$route.params.roomId;\n        this.cp = this.$route.query.cp as string;\n        this.name = this.$route.query.name as string;\n        this.time = this.$route.query.time as string;\n        this.appId = this.$route.query.appId as string;\n        this.userId = this.$route.query.userId as string;\n        this.supportCheck && this.checkRoomExist();\n    }\n\n    checkRoomExist() {\n        console.log(this.$router);\n        Room.classRoom(this.roomId).then(res => {\n            if (res.msg.code === 200) {\n                console.log('checkRoomExist', this.$router);\n                // if (this.isStart !== 2) {\n                //     this.$router.push(this.$route.fullPath.replace('student', 'pull'));\n                // }\n                if (res.exist) {\n                    let appId = Number(this.appId);\n                    webrtcService.login(this.roomId, 2, appId, this.userId, true).then(\n                        (list: StreamInfo[]) => {\n                            // 主播未开始\n                            if (list.length === 0) {\n                                // this.logOut();\n                                setTimeout(() => {\n                                    this.checkRoomExist();\n                                }, 5000);\n                            } else {\n                                // webrtcService.leaveRoom();\n                                this.$router.push(this.$route.fullPath.replace('student', 'pull'));\n                            }\n                        },\n                        err => {\n                            console.error(err);\n                        },\n                    );\n                }\n            } else {\n                this.status = '直播已经结束';\n                this.bg = require('../../assets/images/LiveEndBg.png');\n            }\n        });\n    }\n\n    // beforeRouteEnter(to: any, from: any, next: any): void {\n    //     // if (from.path.indexOf('pull') == 1) {\n    //     //     next((vm: any) => {\n    //     //         vm.status = '直播已经结束';\n    //     //     });\n    //     // }\n    //     // next();\n    //\n    //     if (this && this.appId) {\n    //         this.checkRoomExist();\n    //     } else {\n    //         next();\n    //     }\n    // }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=347d56df&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=347d56df&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"347d56df\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=347d56df&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=347d56df&scoped=true&lang=less&\""],"sourceRoot":""}